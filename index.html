<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/ui.css">
    <title>YeolYi</title>
    <script src="js/jquery.js"></script>
    <script>
        class ScrollBlock {
            constructor(startH, fadingH, endH, appearAnim, disappearAnim) {
                this.startH = startH;
                this.fadingH = fadingH;
                this.endH = endH;
                this.animation = function (height, target) {
                    if (height <= fadingH) {
                        appearAnim(height, target)
                    } else {
                        disappearAnim(height, target)
                    }
                }
            }
        }

        function easeInOut(startH, endH, curH, startVal, endVal) {
            const p = Math.min(1, (curH - startH) / (endH - startH))

            function easeInOutQuart(x) {
                return x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2;
            }
            return startVal + (endVal - startVal) * easeInOutQuart(p)
        }

        const scrollBlockOne = new ScrollBlock(0, 700, 1000,
            function (height, target) {
                popPadding = easeInOut(0, 400, height, 0, 2.5)
                scrollPadding = this.easeInOut(0, 1000, height, 0, 1.2)
                newOpacity = easeInOut(0, 600, height, 0.3, 1)
                target.css({
                    "padding-bottom": (popPadding + scrollPadding) + "em",
                    "opacity": newOpacity
                })
            },
            function (height, target) {
                popPadding = easeInOut(0, 200, 200, 0, 2.5)
                scrollPadding = this.easeInOut(0, 1000, height, 0, 1.2)
                newOpacity = easeInOut(700, 1000, height, 1, 0)
                target.css({
                    "padding-bottom": (popPadding + scrollPadding) + "em",
                    "opacity": newOpacity
                })
            }
        )

        const scrollBlockTwo = new ScrollBlock(200, 700, 1000,
            function (height, target) {
                scrollPadding = this.easeInOut(0, 1000, height, 0, 1.2)
                newOpacity = easeInOut(200, 600, height, 0, 1)
                target.css({
                    "padding-bottom": scrollPadding + "em",
                    "opacity": newOpacity
                })
            },
            function (height, target) {
                scrollPadding = this.easeInOut(0, 1000, height, 0, 1.2)
                newOpacity = easeInOut(700, 1000, height, 1, 0)
                target.css({
                    "padding-bottom": scrollPadding + "em",
                    "opacity": newOpacity
                })
            }
        )

        scrollBlocks = [scrollBlockOne, scrollBlockTwo]

        function update() {
            let height = document.documentElement.scrollTop;
            console.log(height)
            for (let i = 0; i < scrollBlocks.length; i++) {
                const element = scrollBlocks[i];
                if (element.startH <= height && height <= element.endH) {
                    target = $(".big-text:nth-child(" + (i + 1) + ")")
                    target.css({
                        "display": "inline-block"
                    })
                    element.animation(height, $(".big-text:nth-child(" + (i + 1) + ")"))
                } else {
                    $(".big-text:nth-child(" + (i + 1) + ")").css({
                        "display": "none"
                    })
                }
            }
        }
        $(update)
        document.addEventListener('scroll', function () {
            update()
        });
    </script>
</head>

<body>
    <header>
        <a href="/" id="yeolyi-logo">YeolYi</a>
        <nav>
            <a href="/stories" class="nav__button">Stories</a>
            <a href="/dev" class="nav__button">Dev</a>
            <a href="/about" class="nav__button">About</a>
        </nav>
    </header>
    <!--
        <img src="/Media/ChildDev.JPG" alt="" id="frontpage__image">
        <p id="frontpage__text">
            개발자가 되고싶었던 중3
        </p>
    -->
    <div id="front-full-frame">
        <div id="screen-frame">
            <div class="big-text">안녕하세요👋</div>
            <div class="big-text">개발자 이성열입니다.</div>
        </div>
    </div>
</body>

</html>